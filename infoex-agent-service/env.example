# InfoEx Claude Agent Service Configuration
# Copy this file to .env and fill in your actual values

# ==========================================
# ANTHROPIC (CLAUDE) CONFIGURATION
# ==========================================
ANTHROPIC_API_KEY=sk-ant-api03-your-api-key-here

# ==========================================
# REDIS CONFIGURATION (Session Storage)
# ==========================================
# Use your external Redis instance for shared context with n8n
# This allows Claude to see the full conversation history
REDIS_URL=redis://localhost:6379
REDIS_DB=0
REDIS_SSL=false

# Alternative individual Redis settings (if not using REDIS_URL):
# REDIS_HOST=localhost
# REDIS_PORT=6379
# REDIS_PASSWORD=

# Redis session key prefix (match n8n's format if different)
# If n8n uses just "abc-123" (no prefix), don't include this variable
# If n8n uses "session:abc-123", set REDIS_SESSION_PREFIX=session
# If n8n uses "infoex:session:abc-123", set REDIS_SESSION_PREFIX=infoex:session
# REDIS_SESSION_PREFIX=session

# ==========================================
# SHARED INFOEX CONFIGURATION
# ==========================================
# Your Aurora Backcountry operation UUID (same for both environments)
OPERATION_UUID=your_aurora_operation_uuid_here

# ==========================================
# STAGING ENVIRONMENT (for testing)
# ==========================================
STAGING_API_KEY=your_staging_api_key_here
STAGING_URL=https://staging-can.infoex.ca/safe-server

# ==========================================
# PRODUCTION ENVIRONMENT (live system)
# ==========================================
PRODUCTION_API_KEY=your_production_api_key_here
PRODUCTION_URL=https://can.infoex.ca/safe-server

# ==========================================
# ACTIVE ENVIRONMENT (staging or production)
# ==========================================
# Set to "staging" for testing, "production" for live submissions
ENVIRONMENT=staging

# ==========================================
# SUBMISSION STATE (Default Setting)
# ==========================================
# Controls whether observations are marked as draft or final
# IN_REVIEW = Draft mode (default) - observations can be reviewed before final submission
# SUBMITTED = Final submission - observations are marked as complete
# Note: This will be overridden by the web app's toggle in the future
# INFOEX_SUBMISSION_STATE=IN_REVIEW

# These will be set automatically based on ENVIRONMENT
# staging: uses STAGING_* values
# production: uses PRODUCTION_* values
INFOEX_API_KEY=
INFOEX_OPERATION_UUID=
INFOEX_BASE_URL=

# ==========================================
# SERVICE CONFIGURATION
# ==========================================
SERVICE_HOST=0.0.0.0
SERVICE_PORT=8000
LOG_LEVEL=INFO
SESSION_TTL_SECONDS=3600  # 1 hour
MAX_CONVERSATION_LENGTH=50  # Maximum messages in conversation history

# ==========================================
# CLAUDE MODEL CONFIGURATION
# ==========================================
CLAUDE_MODEL=claude-3-opus-20240229
CLAUDE_MAX_TOKENS=1024
CLAUDE_TEMPERATURE=0.3

# ==========================================
# CORS CONFIGURATION
# ==========================================
# Add your n8n instance URL here
CORS_ALLOWED_ORIGINS=["http://localhost:5678", "https://your-n8n-instance.com"]

# ==========================================
# RATE LIMITING (Optional)
# ==========================================
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_PERIOD=60  # seconds

# ==========================================
# RENDER DEPLOYMENT NOTES
# ==========================================
# On Render, set these environment variables:
# 1. ANTHROPIC_API_KEY - Your Claude API key
# 2. REDIS_URL - Will be auto-set if using Render Redis
# 3. STAGING_* or PRODUCTION_* - Your InfoEx credentials
# 4. ENVIRONMENT - "staging" or "production"
# 5. CORS_ALLOWED_ORIGINS - Your n8n instance URL
#
# Render will automatically set:
# - PORT (use this instead of SERVICE_PORT in production)
# - Other internal Render variables
